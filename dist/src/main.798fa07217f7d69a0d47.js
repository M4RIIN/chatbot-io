(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,n){for(var r=0;r<n.length;r++){var i=n[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,(void 0,o=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var i=r.call(t,"string");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(i.key),"symbol"===e(o)?o:String(o)),i)}var o}function n(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function r(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,o(e,t,"get"))}function i(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,o(e,t,"set"),n),n}function o(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var a=new WeakMap,l=new WeakMap,s=new WeakMap,u=function(){function e(t,r,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,a,{writable:!0,value:void 0}),n(this,l,{writable:!0,value:void 0}),n(this,s,{writable:!0,value:void 0}),i(this,l,r),i(this,a,t),i(this,s,o)}var o,u;return o=e,(u=[{key:"date",get:function(){return r(this,s)}},{key:"sender",get:function(){return r(this,a)}},{key:"message",get:function(){return r(this,l)}},{key:"toJSON",value:function(){return'{"sender":"'.concat(r(this,a),'","date":"').concat(r(this,s),'","message":"').concat(r(this,l).replaceAll('"',"__^^"),'"}')}}])&&t(o.prototype,u),Object.defineProperty(o,"prototype",{writable:!1}),e}();function c(e,t){if("brasseries"===e.message){var n=new XMLHttpRequest;n.open("GET","https://api.openbrewerydb.org/breweries/random?size=5",!1),n.send(null);var r=JSON.parse(n.responseText);return new u(t,(i='<div style="width:100%;border-radius:10px;background-color:#053147;color:white;text-align: left;margin-right: 10px;margin-left: 10px;padding-right: 5px;margin-bottom: 10px"><p style="">Voici une liste de 5 brasseries que vous pourriez visiter :</p><ul>',r.forEach((function(e){var t=e.name,n="".concat(e.street," (").concat(e.country,")");i+="<li><strong>".concat(t,"</strong> située au ").concat(n,"</li>")})),i+="</ul></div>"),new Date)}var i;return"heure"===e.message?new u(t,"Il est ".concat((new Date).toLocaleTimeString(),", l'heure de se : <strong> pinter </strong> !"),new Date):null}function f(){return["brasseries : je vous donnerai une liste de 5 brasseries que vous pourriez visiter","heure : je vous dirais l`heure qu'il est"]}function p(e,t){if("cocktails"===e.message){var n=new XMLHttpRequest;n.open("GET","https://www.thecocktaildb.com/api/json/v1/1/random.php",!1),n.send(null);var r=JSON.parse(n.responseText);return new u(t,(i=r.drinks[0],o='<div style="width:100%;border-radius:10px;background-color:#053147;color:white;text-align: left;margin-right: 10px;margin-left: 10px;padding-right: 5px;margin-bottom: 10px"><p style="">Voici les instructions pour réaliser un '.concat(i.strDrink," :</p><ul>"),(o+="<li><strong>".concat(i.strInstructions,"</li>"))+'</ul><img style="width:100%" src='.concat(i.strDrinkThumb,"></img></div>")),new Date)}var i,o;return"pref"===e.message?new u(t,"J'avou j'ai un faible pour le Bloody Mary",new Date):null}function d(){return["cocktails : je vous donnerai un cocktail aléatoire à réaliser","pref : je vous donnerai mon cocktail favoris !"]}function v(e,t){if("nasa today"===e.message){var n=new XMLHttpRequest;n.open("GET","https://api.nasa.gov/planetary/apod?api_key=xJvCK7z2sJwdt41xMve3iN6BVhyldhBS9ozUF2NF",!1),n.send(null);var r=JSON.parse(n.responseText);return new u(t,(o=(i=r).url,a=i.title,'<div style="display:flex;width:100%;flex-direction:column"><p style="font-weight:bolder">'.concat(a,'</p><img style="max-height:100px" src=').concat(o,"></img></div>")),new Date)}var i,o,a;return function(e,t){var n=e.message.split("+");if(2===n.length){var r=n[1].split("=");if(2===r.length&&(n.push(r[1]),!Number.isNaN(n[0])&&!Number.isNaN(r[0])&&"?"===n[2])){var i=Number(n[0])+Number(r[0]);return new u(t,"".concat(n[0],"+").concat(r[0],"=").concat(i),new Date)}}return null}(e,t)}function y(){return["nasa today : obtenez la photo de l'espace aujourd'hui",["< nombre > + < nombre >=? : Faites moi faire une addition. Ex : 4+5=?"]]}function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===h(i)?i:String(i)),r)}var i}function b(e,t,n){w(e,t),t.set(e,n)}function w(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function g(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,E(e,t,"get"))}function S(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,E(e,t,"set"),n),n}function E(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var x=new WeakMap,T=new WeakMap,k=new WeakMap,j=new WeakSet,M=function(){function e(t,n,r){var i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),w(this,i=j),i.add(this),b(this,x,{writable:!0,value:void 0}),b(this,T,{writable:!0,value:void 0}),b(this,k,{writable:!0,value:void 0}),S(this,x,t),S(this,T,n),S(this,k,r)}var t,n;return t=e,(n=[{key:"name",get:function(){return g(this,x)}},{key:"answerToAMessage",value:function(e){if("bonjour"===e.message.toLowerCase())return new u(g(this,x),"Salut Salut !",new Date);if("help"===e.message){var t=[];return t.push("bonjour : Saluez tout le monde"),g(this,k)&&(t.push(g(this,k).call(this)),t=t.flat()),new u(g(this,x),function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(this,j,P).call(this,t),new Date)}return g(this,T)?g(this,T).call(this,e,g(this,x)):null}}])&&m(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function P(e){var t='<div style="width:100%;border-radius:10px;background-color:#053147;color:white;text-align: left;margin-right: 10px;margin-left: 10px;padding-right: 5px;margin-bottom: 10px"><ul>';return e.forEach((function(e){t+="<li>".concat(e,"</li>")})),t+="</ul></div>"}function C(e){return C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},C(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==C(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==C(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===C(i)?i:String(i)),r)}var i}function O(e,t,n){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function B(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,D(e,t,"get"))}function I(e,t,n){return function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(e,D(e,t,"set"),n),n}function D(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var W=new WeakMap,z=new WeakMap,A=new WeakMap,L=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),O(this,W,{writable:!0,value:void 0}),O(this,z,{writable:!0,value:void 0}),O(this,A,{writable:!0,value:void 0}),I(this,z,[]),I(this,W,[])}var t,n;return t=e,(n=[{key:"messages",get:function(){return B(this,z)}},{key:"subscribe",value:function(e){B(this,W).push(e)}},{key:"addMessage",value:function(e){var t=this;B(this,z).push(e),B(this,W).forEach((function(n){var r=n.answerToAMessage(e);r&&B(t,z).push(r);var i=JSON.stringify(B(t,z));localStorage.clear(),localStorage.setItem("messages",i),B(t,A).call(t,r)}))}},{key:"setUpdateView",value:function(e){I(this,A,e)}}])&&N(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==J(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===J(i)?i:String(i)),r)}var i}function H(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,q(e,t,"get"))}function q(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var V=new WeakMap,R=function(){function e(t){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),i={writable:!0,value:void 0},function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(n=this,r=V),r.set(n,i),function(e,t,n){(function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}})(e,q(e,t,"set"),n)}(this,V,t)}var t,n;return t=e,(n=[{key:"createMessageBox",value:function(e){if(e){var t="start",n=";background-color: #DFDFEA;";"vous"===e.sender&&(t="end",n=";background-color: #EDF4FF;");var r=H(this,V).createElement("div");r.style.cssText="min-height:50px;margin:10px;text-align:end;justify-content:".concat(t,";display:flex");var i=H(this,V).createElement("div");i.style.cssText="min-width:150px;display:flex;flex-direction:column;justify-content:start;align-items:baseline;border:solid;border-radius:10px;;box-shadow: 2px 2px 2px grey".concat(n);var o=H(this,V).createElement("div"),a=H(this,V).createElement("div");o.style.cssText="display:flex;flex-direction:row;",a.style.cssText='width:40px;background-image: url("https://api.dicebear.com/5.x/pixel-art/svg?seed='.concat(e.sender,'");border-radius:100%;background-repeat: no-repeat;height:100%'),o.appendChild(a);var l=H(this,V).createElement("p"),s="".concat(e.date.getHours(),":").concat(e.date.getMinutes(),":").concat(e.date.getSeconds()),u="".concat(e.date.getDate(),"/").concat(e.date.getMonth()+1,"/").concat(e.date.getFullYear());l.innerHTML="".concat(e.sender," - ").concat(u," ").concat(s),l.style.cssText="font-size:15px";var c=H(this,V).createElement("div");return c.style.cssText="font-size:15px;display:flex;max-width:300px;min-height:30px",c.innerHTML=e.message,o.appendChild(l),i.appendChild(o),i.appendChild(c),r.appendChild(i),r}return null}}])&&F(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==_(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==_(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===_(i)?i:String(i)),r)}var i}function U(e,t,n){X(e,t),t.set(e,n)}function X(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function K(e,t,n){return Q(e,t),Y(n,"get"),$(e,n)}function Y(e,t){if(void 0===e)throw new TypeError("attempted to "+t+" private static field before its declaration")}function Q(e,t){if(e!==t)throw new TypeError("Private static access of wrong provenance")}function Z(e,t){return $(e,te(e,t,"get"))}function $(e,t){return t.get?t.get.call(e):t.value}function ee(e,t,n){return ne(e,te(e,t,"set"),n),n}function te(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function ne(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}var re=new WeakMap,ie=new WeakMap,oe=new WeakSet,ae=function(){function e(){var t,n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),X(this,t=oe),t.add(this),U(this,re,{writable:!0,value:void 0}),U(this,ie,{writable:!0,value:void 0});var r=JSON.parse(localStorage.getItem("messages"));ee(this,ie,new L),r&&r.forEach((function(e){if(e){var t=e;try{t=JSON.parse(e)}catch(n){t=e}var r=t.message.replaceAll("__^^",'"'),i=new u(t.sender,r,new Date(t.date));Z(n,ie).addMessage(i),function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(n,oe,le).call(n,i)}})),ee(this,re,[new M("WALL-E",p,d),new M("JARVIS",c,f),new M("R2D2",v,y)])}var t,n,r;return t=e,r=[{key:"INSTANCE",get:function(){var t,n,r;return null==K(this,e,se)&&(this,t=e,n=se,r=new e,Q(this,t),Y(n,"set"),ne(this,n,r)),K(this,e,se)}}],(n=[{key:"initSubs",value:function(){var e=this;Z(this,re).forEach((function(t){Z(e,ie).subscribe(t,t.answerToAMessage)}))}},{key:"contacts",get:function(){return Z(this,re)}},{key:"chat",get:function(){return Z(this,ie)}}])&&G(t.prototype,n),r&&G(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function le(e){if(e){var t=new R(document).createMessageBox(e);document.getElementById("chat").append(t),document.getElementById("chat").scrollTo(0,document.getElementById("chat").scrollHeight)}}var se={writable:!0,value:null};function ue(e){return ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ue(e)}function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(void 0,i=function(e,t){if("object"!==ue(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==ue(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(r.key),"symbol"===ue(i)?i:String(i)),r)}var i}function fe(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function pe(e,t){return function(e,t){return t.get?t.get.call(e):t.value}(e,de(e,t,"get"))}function de(e,t,n){if(!t.has(e))throw new TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}var ve=new WeakMap,ye=new WeakSet,he=function(){function e(t){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),fe(this,n=ye),n.add(this),function(e,t,n){fe(e,t),t.set(e,{writable:!0,value:void 0})}(this,ve),i=t,function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw new TypeError("attempted to set read only private field");t.value=n}}(r=this,de(r,ve,"set"),i)}var t,n;return t=e,n=[{key:"createBotTable",value:function(e){var t=this,n=pe(this,ve).createElement("div");return e.forEach((function(e){n.appendChild(function(e,t,n){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return n}(t,ye,me).call(t,e))})),n}}],n&&ce(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function me(e){var t=pe(this,ve).createElement("div");t.style.cssText="width:100%;height:50px;border:solid;border-radius:10px;margin-top:5px;display:flex;box-shadow: 10px 5px 5px grey;background-color:white";var n=pe(this,ve).createElement("div");n.style.cssText="flex:1";var r=pe(this,ve).createElement("div");r.style.cssText='width:50px;background-image: url("https://api.dicebear.com/5.x/pixel-art/svg?seed='.concat(e.name,'");border-radius:100%');var i=pe(this,ve).createElement("p");return i.innerHTML=e.name,n.appendChild(i),t.appendChild(r),t.appendChild(n),t}function be(e){return be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},be(e)}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ge(r.key),r)}}function ge(e){var t=function(e,t){if("object"!==be(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===be(t)?t:String(t)}var Se=function(){function e(t){var n,r,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,i=void 0,(r=ge(r="fn"))in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,this.fn=t}var t,n;return t=e,(n=[{key:"answerToAMessage",value:function(e){this.fn(e)}}])&&we(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),Ee=ae.INSTANCE.contacts,xe=ae.INSTANCE.chat;function Te(e){if(e){var t=new R(document).createMessageBox(e);document.getElementById("chat").append(t),document.getElementById("chat").scrollTo(0,document.getElementById("chat").scrollHeight)}}xe.setUpdateView(Te);var ke=new Se(Te);xe.subscribe(ke),ae.INSTANCE.initSubs();var je=document.getElementById("sendBtn");je.addEventListener("click",(function(){var e=document.getElementById("message").value,t=new u("vous",e,new Date);xe.addMessage(t),document.getElementById("message").value=""}));var Me=new he(document).createBotTable(Ee);document.getElementById("chatbot-view").append(Me),document.getElementById("message").addEventListener("keypress",(function(e){"Enter"===e.key&&(e.preventDefault(),je.click())}))})();